import cv2
import numpy as np
import matplotlib.pyplot as plt

from scipy.interpolate import interp1d

gps_path = np.array([
[-64.86672794117646, -25.3081],
[-64.86672794117646,-25.30817],
[-64.86672794117646,-23.69811],
[-64.86672794117646,-21.48427],
[-64.86672794117646,-19.67295],
[-64.86672794117646,-17.45911],
[-64.86672794117646,-16.45283],
[-64.86672794117646,-16.45283],
[-64.86672794117646,-13.83647],
[-64.86672794117646,-13.83647],
[-64.86672794117646,-12.62893],
[-64.86672794117646,-10.61635],
[-64.86672794117646,-8.805031],
[-64.65992647058823,-6.389937],
[-64.65992647058823,-4.377358],
[-64.65992647058823,-1.962264],
[-64.4531250 ,      2.6666666],
[-64.65992647058823,2.6666666],
[-64.453125,4.679245283018872],
[-64.453125,6.691823899371073],
[-64.453125,8.301886792452834],
[-64.453125,10.31446540880503],
[-64.453125,12.52830188679245],
[-64.453125,14.94339622641509],
[-64.453125,17.35849056603777],
[-64.453125,19.77358490566038],
[-64.453125,22.59119496855346],
[-64.453125,25.00628930817610],
[-64.65992647058823,26.817610],
[-64.453125,28.62893081761007],
[-64.453125,30.64150943396227],
[-64.65992647058823,33.056603],
[-64.453125,35.47169811320755],
[-64.453125,37.88679245283019],
[-64.65992647058823,40.301886],
[-64.453125,42.91823899371070],
[-64.453125,45.13207547169811],
[-64.24632352941177,47.748427],
[-64.65992647058823,49.962264],
[-64.453125,51.97484276729560],
[-64.24632352941177,54.188679],
[-64.65992647058823,56.201257],
[-64.453125,58.61635220125787],
[-64.453125,60.83018867924528],
[-64.453125,62.84276729559748],
[-64.453125,65.05660377358491],
[-64.453125,67.47169811320755],
[-64.453125,69.08176100628931],
[-64.453125,71.09433962264151],
[-64.24632352941177,72.704402],
[-63.62591911764706,74.515723],
[-63.21231617647059,76.327044],
[-62.798713235294116,78.13836],
[-62.17830882352941,80.150943],
[-61.14430147058823,82.767295],
[-59.903492647058826,85.18238],
[-58.86948529411765,86.993710],
[-57.21507352941177,89.207547],
[-55.974264705882355,90.81761],
[-54.73345588235294,92.427672],
[-53.07904411764706,94.037735],
[-52.045036764705884,95.44654],
[-50.390625,96.85534591194968],
[-48.32261029411765,98.465408],
[-46.04779411764706,99.672955],
[-44.393382352941174,100.8805],
[-42.7389705882353,101.283018],
[-41.08455882352941,102.49056],
[-39.43014705882353,103.09433],
[-37.15533088235294,104.10062],
[-34.67371323529412,104.50314],
[-32.8125,105.106918238993730],
[-30.744485294117652,105.1069],
[-28.676470588235297,105.5094],
[-26.40165441176471,105.50943],
[-24.126838235294123,105.5094],
[-21.231617647058826,105.5094],
[-19.16360294117647,105.71069],
[-16.888786764705884,105.5094],
[-14.407169117647065,105.7106],
[-11.925551470588239,105.5094],
[-9.650735294117652,105.50943],
[-7.169117647058826,105.50943],
[-4.894301470588246,105.50943],
[-1.999080882352942,105.50943],
[0.8961397058823479,105.71069],
[3.791360294117638,105.308176],
[6.272977941176464,105.308176],
[8.961397058823522,105.308176],
[12.063419117647058,105.30817],
[14.338235294117638,105.30817],
[16.819852941176464,105.50943],
[19.715073529411754,105.10691],
[22.19669117647058,105.308176],
[24.057904411764696,105.30817],
[26.953125,105.50943396226415],
[29.434742647058812,105.30817],
[31.916360294117638,105.50943],
[34.81158088235293,105.308176],
[36.87959558823529,105.308176],
[39.15441176470587,105.308176],
[41.015624999999986,105.30817],
[43.08363970588235,105.308176],
[44.944852941176464,105.30817],
[47.42647058823529,105.308176],
[50.11488970588235,105.308176],
[52.38970588235293,105.308176],
[54.250919117647044,105.30817],
[56.52573529411765,105.308176],
[59.42095588235293,105.106918],
[61.69577205882351,105.106918],
[64.38419117647058,105.106918],
[66.2454044117647,105.1069182],
[68.52022058823528,105.106918],
[70.79503676470588,105.106918],
[73.48345588235293,104.905660],
[76.171875,104.90566037735849],
[78.65349264705881,104.905660],
[81.34191176470588,104.905660],
[84.03033088235293,104.905660],
[85.68474264705881,104.905660],
[88.16636029411762,104.905660],
[91.68198529411762,104.905660],
[91.68198529411762,104.905660],
[94.3704044117647,104.9056603],
[96.64522058823528,104.905660],
[99.33363970588235,104.905660],
[102.43566176470588,104.50314],
[104.71047794117646,104.10062],
[106.77849264705881,103.69811],
[109.26011029411762,103.09433],
[111.328125,102.2893081761006],
[113.60294117647058,101.48427],
[115.67095588235293,100.67924],
[117.94577205882351,99.672955],
[120.01378676470588,98.465408],
[122.08180147058823,97.459119],
[123.73621323529412,96.251572],
[125.59742647058823,94.842767],
[127.04503676470586,93.433962],
[128.90625,91.823899371069190],
[130.56066176470586,90.817610],
[131.59466911764704,89.207547],
[133.0422794117647,87.3962264],
[134.69669117647058,85.182389],
[136.14430147058823,82.566037],
[137.1783088235294,80.3522012],
[138.21231617647058,78.138364],
[138.83272058823528,75.924528],
[139.453125,73.50943396226415],
[139.65992647058823,70.691823],
[140.0735294117647,67.8742138],
[139.86672794117646,66.465408],
[139.86672794117646,64.050314],
[140.0735294117647,61.6352201],
[139.86672794117646,59.018867],
[140.0735294117647,56.6037735],
[139.86672794117646,54.389937],
 ])

car_path = np.array([  
[-64.45623342175067,-36.530120481],
[-64.45623342175067,-34.602409638],
[-64.05835543766578,-33.060240963],
[-63.6604774535809,-31.3253012048],
[-63.6604774535809,-29.3975903614],
[-63.46153846153846,-27.855421686],   
[-64.25729442970822,-13.397590361],
[-65.25198938992042,-11.084337349],
[-65.64986737400531,-9.3493975903],
[-64.85411140583554,-7.6144578313],
[-63.46153846153846,-5.8795180722],
[-63.46153846153846,-3.9518072289],
[-64.25729442970822,-1.8313253012],
[-64.45623342175067,-0.2891566265],
[-63.46153846153846,1.06024096385],
[-62.86472148541114,3.37349397590],
[-62.86472148541114,5.30120481927],
[-63.262599469496024,7.6144578313],
[-62.6657824933687,8.963855421686],
[-62.46684350132626,11.2771084337],
[-63.06366047745358,13.0120481927],
[-63.6604774535809,14.55421686746],
[-64.05835543766578,15.9036144578],
[-62.6657824933687,17.83132530120],
[-61.87002652519894,19.9518072289],
[-62.06896551724138,21.1084337349],
[-62.06896551724138,22.8433734939],
[-62.267904509283824,24.192771084],
[-62.267904509283824,25.734939759],
[-62.267904509283824,27.084337349],
[-62.267904509283824,29.012048192],
[-62.267904509283824,30.939759036],
[-62.267904509283824,32.289156626],
[-62.86472148541114,34.0240963855],
[-62.86472148541114,36.1445783132],
[-62.46684350132626,38.0722891566],
[-62.6657824933687,39.80722891566],
[-62.6657824933687,41.54216867469],
[-63.262599469496024,43.277108433],
[-63.6604774535809,45.39759036144],
[-63.46153846153846,47.3253012048],
[-63.85941644562334,49.6385542168],
[-63.06366047745358,51.3734939759],
[-62.86472148541114,52.7228915662],
[-63.6604774535809,54.07228915662],
[-64.25729442970822,57.1566265060],
[-63.262599469496024,59.084337349],
[-62.267904509283824,61.397590361],
[-62.6657824933687,63.13253012048],
[-63.06366047745358,65.4457831325],
[-63.06366047745358,67.5662650602],
[-62.267904509283824,69.686746987],
[-61.87002652519894,72.0000000000],
[-61.671087533156495,74.506024096],
[-61.47214854111406,76.8192771084],
[-61.671087533156495,78.939759036],
[-61.671087533156495,80.481927710],
[-61.671087533156495,82.216867469],
[-61.87002652519894,84.7228915662],
[-61.87002652519894,86.8433734939],
[-61.07427055702918,88.5783132530],
[-59.48275862068966,90.5060240963],
[-57.891246684350136,91.855421686],
[-56.896551724137936,93.012048192],
[-54.50928381962865,93.9759036144],
[-51.724137931034484,94.361445783],
[-50.13262599469496,95.3253012048],
[-48.14323607427056,96.6746987951],
[-47.3474801061008,98.79518072289],
[-47.14854111405836,101.493975903],
[-46.55172413793103,104.771084337],
[-44.56233421750663,106.698795180],
[-41.37931034482759,108.048192771],
[-38.793103448275865,108.43373493],
[-36.40583554376658,109.204819277],
[-34.0185676392573,110.1686746987],
[-31.631299734748012,110.74698795],
[-29.64190981432361,111.710843373],
[-26.856763925729446,111.90361445],
[-24.46949602122016,112.096385542],
[-21.485411140583558,112.09638554],
[-18.302387267904514,112.09638554],
[-14.920424403183027,112.28915662],
[-11.339522546419104,112.09638554],
[-7.957559681697617,111.518072289],
[-5.371352785145888,111.518072289],
[-3.779840848806373,110.554216867],
[-0.9946949602122004,110.16867469],
[0.9946949602122004,109.204819277],
[2.7851458885941582,108.240963855],
[5.570291777188331,107.2771084337],
[7.5596816976127315,106.120481927],
[9.748010610079575,105.5421686746],
[12.33421750663129,104.5783132530],
[14.721485411140577,103.614457831],
[17.108753315649864,103.036144578],
[19.297082228116707,102.457831325],
[21.286472148541108,103.421686746],
[24.07161803713528,104.5783132530],
[27.85145888594164,105.5421686746],
[31.631299734748012,104.000000000],
[33.62068965517241,102.8433734939],
[36.20689655172413,103.4216867469],
[38.79310344827586,104.5783132530],
[41.77718832891246,106.1204819277],
[46.35278514588859,106.8915662650],
[47.34748010610079,103.8072289156],
[48.34217506631299,101.3012048192],
[50.530503978779834,99.9518072289],
[55.106100795755964,100.530120481],
[58.68700265251988,100.9156626506],
[62.267904509283824,98.7951807228],
[64.65517241379311,98.60240963855],
[67.63925729442971,98.98795180722],
[70.62334217506631,98.98795180722],
[73.60742705570291,99.75903614457],
[75.59681697612731,100.3373493975],
[78.58090185676392,100.5301204819],
[80.76923076923077,101.3012048192],
[83.55437665782492,102.0722891566],
[85.74270557029178,102.0722891566],
[88.12997347480106,102.4578313253],
[89.72148541114058,102.6506024096],
[92.10875331564986,102.6506024096],
[94.2970822281167,103.03614457831],
[96.68435013262598,103.8072289156],
[98.47480106100795,104.7710843373],
[100.86206896551724,104.963855421],
[101.85676392572944,103.036144578],
[103.44827586206895,100.530120481],
[106.03448275862067,99.9518072289],
[108.22281167108753,99.9518072289],
[111.0079575596817,100.3373493975],
[113.19628647214853,101.108433734],
[115.58355437665782,101.301204819],
[118.16976127320953,101.686746987],
[120.9549071618037,101.6867469879],
[123.14323607427056,101.879518072],
[125.9283819628647,100.7228915668],
[127.32095490716179,100.915662650],
[129.50928381962865,101.108433734],
[132.2944297082228,101.1084337349],
[135.47745358090185,101.108433734],
[137.86472148541114,100.144578313],
[138.46153846153845,97.0602409638],
[139.25729442970822,95.9036144578],
[138.85941644562334,93.9759036144],
[138.85941644562334,91.8554216867],
[137.26790450928382,89.7349397590],
[136.27320954907162,87.6144578313],
[134.68169761273208,85.6867469879],
[134.2838196286472,84.53012048192],
[132.69230769230768,82.9879518072],
[130.70291777188328,81.6385542168],
[128.71352785145888,80.2891566265],
[126.12732095490716,78.5542168674],
[125.13262599469496,77.5903614457],
[123.74005305039788,76.6265060240],
[121.9496021220159,76.04819277108],
[120.35809018567639,74.5060240963],
[117.9708222811671,73.54216867469],
[116.18037135278513,71.2289156626],
[115.18567639257293,69.8795180722],
[114.58885941644562,66.9879518072],
[116.9761273209549,64.28915662650],
])

# Considerando que os pontos de GPS são os pontos de referência
f = interp1d(np.linspace(0, 1, len(gps_path)), gps_path, axis=0, kind='linear')
car_path_interp = f(np.linspace(0, 1, len(car_path)))

# Calcular distâncias
distances = np.linalg.norm(car_path_interp - car_path, axis=1)

# Calcular métricas de erro
mae = np.mean(distances)
mse = np.mean(distances**2)
rmse = np.sqrt(mse)

print(f"MAE: {mae}")
print(f"MSE: {mse}")
print(f"RMSE: {rmse}")

# Plots
plt.figure(figsize=(12, 6))

plt.subplot(1, 2, 1)
plt.plot(gps_path[:, 0], gps_path[:, 1], label='Rota GPS', marker='o')
plt.plot(car_path[:, 0], car_path[:, 1], label='Caminho Carro', marker='x')
plt.legend()
plt.title('Comparação de Rotas')

plt.subplot(1, 2, 2)
plt.plot(distances, marker='o')
plt.title('Erro entre Pontos Correspondentes')
plt.xlabel('Índice do Ponto')
plt.ylabel('Distância')

plt.tight_layout()
plt.show()

