import cv2
import numpy as np
import matplotlib.pyplot as plt

from scipy.interpolate import interp1d

gps_path = np.array([
[-64.86672794117646, -25.3081],
[-64.86672794117646,-25.30817],
[-64.86672794117646,-23.69811],
[-64.86672794117646,-21.48427],
[-64.86672794117646,-19.67295],
[-64.86672794117646,-17.45911],
[-64.86672794117646,-16.45283],
[-64.86672794117646,-16.45283],
[-64.86672794117646,-13.83647],
[-64.86672794117646,-13.83647],
[-64.86672794117646,-12.62893],
[-64.86672794117646,-10.61635],
[-64.86672794117646,-8.805031],
[-64.65992647058823,-6.389937],
[-64.65992647058823,-4.377358],
[-64.65992647058823,-1.962264],
[-64.4531250 ,      2.6666666],
[-64.65992647058823,2.6666666],
[-64.453125,4.679245283018872],
[-64.453125,6.691823899371073],
[-64.453125,8.301886792452834],
[-64.453125,10.31446540880503],
[-64.453125,12.52830188679245],
[-64.453125,14.94339622641509],
[-64.453125,17.35849056603777],
[-64.453125,19.77358490566038],
[-64.453125,22.59119496855346],
[-64.453125,25.00628930817610],
[-64.65992647058823,26.817610],
[-64.453125,28.62893081761007],
[-64.453125,30.64150943396227],
[-64.65992647058823,33.056603],
[-64.453125,35.47169811320755],
[-64.453125,37.88679245283019],
[-64.65992647058823,40.301886],
[-64.453125,42.91823899371070],
[-64.453125,45.13207547169811],
[-64.24632352941177,47.748427],
[-64.65992647058823,49.962264],
[-64.453125,51.97484276729560],
[-64.24632352941177,54.188679],
[-64.65992647058823,56.201257],
[-64.453125,58.61635220125787],
[-64.453125,60.83018867924528],
[-64.453125,62.84276729559748],
[-64.453125,65.05660377358491],
[-64.453125,67.47169811320755],
[-64.453125,69.08176100628931],
[-64.453125,71.09433962264151],
[-64.24632352941177,72.704402],
[-63.62591911764706,74.515723],
[-63.21231617647059,76.327044],
[-62.798713235294116,78.13836],
[-62.17830882352941,80.150943],
[-61.14430147058823,82.767295],
[-59.903492647058826,85.18238],
[-58.86948529411765,86.993710],
[-57.21507352941177,89.207547],
[-55.974264705882355,90.81761],
[-54.73345588235294,92.427672],
[-53.07904411764706,94.037735],
[-52.045036764705884,95.44654],
[-50.390625,96.85534591194968],
[-48.32261029411765,98.465408],
[-46.04779411764706,99.672955],
[-44.393382352941174,100.8805],
[-42.7389705882353,101.283018],
[-41.08455882352941,102.49056],
[-39.43014705882353,103.09433],
[-37.15533088235294,104.10062],
[-34.67371323529412,104.50314],
[-32.8125,105.106918238993730],
[-30.744485294117652,105.1069],
[-28.676470588235297,105.5094],
[-26.40165441176471,105.50943],
[-24.126838235294123,105.5094],
[-21.231617647058826,105.5094],
[-19.16360294117647,105.71069],
[-16.888786764705884,105.5094],
[-14.407169117647065,105.7106],
[-11.925551470588239,105.5094],
[-9.650735294117652,105.50943],
[-7.169117647058826,105.50943],
[-4.894301470588246,105.50943],
[-1.999080882352942,105.50943],
[0.8961397058823479,105.71069],
[3.791360294117638,105.308176],
[6.272977941176464,105.308176],
[8.961397058823522,105.308176],
[12.063419117647058,105.30817],
[14.338235294117638,105.30817],
[16.819852941176464,105.50943],
[19.715073529411754,105.10691],
[22.19669117647058,105.308176],
[24.057904411764696,105.30817],
[26.953125,105.50943396226415],
[29.434742647058812,105.30817],
[31.916360294117638,105.50943],
[34.81158088235293,105.308176],
[36.87959558823529,105.308176],
[39.15441176470587,105.308176],
[41.015624999999986,105.30817],
[43.08363970588235,105.308176],
[44.944852941176464,105.30817],
[47.42647058823529,105.308176],
[50.11488970588235,105.308176],
[52.38970588235293,105.308176],
[54.250919117647044,105.30817],
[56.52573529411765,105.308176],
[59.42095588235293,105.106918],
[61.69577205882351,105.106918],
[64.38419117647058,105.106918],
[66.2454044117647,105.1069182],
[68.52022058823528,105.106918],
[70.79503676470588,105.106918],
[73.48345588235293,104.905660],
[76.171875,104.90566037735849],
[78.65349264705881,104.905660],
[81.34191176470588,104.905660],
[84.03033088235293,104.905660],
[85.68474264705881,104.905660],
[88.16636029411762,104.905660],
[91.68198529411762,104.905660],
[91.68198529411762,104.905660],
[94.3704044117647,104.9056603],
[96.64522058823528,104.905660],
[99.33363970588235,104.905660],
[102.43566176470588,104.50314],
[104.71047794117646,104.10062],
[106.77849264705881,103.69811],
[109.26011029411762,103.09433],
[111.328125,102.2893081761006],
[113.60294117647058,101.48427],
[115.67095588235293,100.67924],
[117.94577205882351,99.672955],
[120.01378676470588,98.465408],
[122.08180147058823,97.459119],
[123.73621323529412,96.251572],
[125.59742647058823,94.842767],
[127.04503676470586,93.433962],
[128.90625,91.823899371069190],
[130.56066176470586,90.817610],
[131.59466911764704,89.207547],
[133.0422794117647,87.3962264],
[134.69669117647058,85.182389],
[136.14430147058823,82.566037],
[137.1783088235294,80.3522012],
[138.21231617647058,78.138364],
[138.83272058823528,75.924528],
[139.453125,73.50943396226415],
[139.65992647058823,70.691823],
[140.0735294117647,67.8742138],
[139.86672794117646,66.465408],
[139.86672794117646,64.050314],
[140.0735294117647,61.6352201],
[139.86672794117646,59.018867],
[140.0735294117647,56.6037735],
[139.86672794117646,54.389937],
 ])

car_path = np.array([
[-64.05835543766578,-25.5421],
[-63.6604774535809,-23.61445],
[-62.6657824933687,-21.49397],
[-62.06896551724138,-19.5662],
[-62.06896551724138,-17.4457],
[-62.06896551724138,-15.7108],
[-62.86472148541114,-13.9759],
[-63.6604774535809,-12.24096],
[-64.65517241379311,-10.5060],
[-65.45092838196287,-8.19277],
[-64.25729442970822,-6.45783],
[-63.85941644562334,-4.53012],
[-63.06366047745358,-1.83132],
[-62.86472148541114, 0.96385],
[-62.267904509283824,1.63855],
[-62.06896551724138,3.566265],
[-62.06896551724138,5.686746],
[-61.47214854111406,6.843373],
[-61.273209549071616,8.57831],
[-61.47214854111406,9.927710],
[-61.87002652519894,11.46987],
[-62.46684350132626,13.20481],
[-63.06366047745358,15.13253],
[-63.262599469496024,17.0602],
[-61.87002652519894,18.40963],
[-60.47745358090186,20.14457],
[-59.88063660477454,22.26506],
[-59.48275862068966,24.00000],
[-58.88594164456234,25.73493],
[-58.88594164456234,27.66265],
[-59.283819628647215,29.3975],
[-60.278514588859416,31.3253],
[-60.47745358090186,32.67469],
[-60.07957559681698,34.02409],
[-60.278514588859416,35.5662],
[-60.278514588859416,37.8795],
[-61.07427055702918,40.00000],
[-61.87002652519894,42.50602],
[-62.46684350132626,44.24096],
[-61.47214854111406,47.13253],
[-61.47214854111406,48.86746],
[-61.07427055702918,50.60240],
[-61.07427055702918,52.14457],
[-60.87533156498674,54.45783],
[-60.87533156498674,56.77108],
[-61.07427055702918,58.50602],
[-60.676392572944295,60.0481],
[-61.07427055702918,61.78313],
[-61.273209549071616,63.3253],
[-61.671087533156495,65.0602],
[-61.87002652519894,67.56626],
[-62.06896551724138,69.49397],
[-62.267904509283824,71.2289],
[-62.46684350132626,72.96385],
[-63.262599469496024,75.0843],
[-63.6604774535809, 76.81927],
[-64.05835543766578,78.93975],
[-64.45623342175067,81.44578],
[-63.262599469496024,82.6024],
[-60.87533156498674,83.95180],
[-58.687002652519894,85.4939],
[-58.289124668435015,86.8433],
[-58.09018567639257,90.31325],
[-57.891246684350136,91.6626],
[-57.69230769230769,94.36144],
[-57.49336870026525,95.71084],
[-57.29442970822281,97.83132],
[-57.09549071618037,99.75903],
[-55.90185676392573,102.0722],
[-54.70822281167109,104.7710],
[-54.70822281167109,107.2771],
[-53.51458885941645,112.0963],
[-50.92838196286472,111.5180],
[-48.93899204244032,110.5542],
[-47.14854111405836,109.3975],
[-44.96021220159152,107.4698],
[-42.17506631299735,105.1566],
[-40.58355437665783,107.2771],
[-38.9920424403183,109.59036],
[-36.40583554376658,111.3253],
[-33.222811671087534,111.710],
[-31.03448275862069,110.7469],
[-29.04509283819629,109.5903],
[-26.06100795755968,108.8192],
[-23.872679045092838,110.361],
[-20.88859416445623,111.1325],
[-17.70557029177719,109.3975],
[-15.11936339522547,107.6626],
[-13.52785145888594,105.9277],
[-11.53846153846154,104.9635],
[-8.554376657824932,103.4216],
[-6.366047745358088,102.8433],
[-3.183023872679044,101.6867],
[-0.5968169761273288,101.879],
[2.5862068965517153,101.8795],
[7.161803713527846,101.68674],
[10.941644562334218,101.6867],
[14.323607427055705,102.0722],
[18.302387267904507,101.6867],
[21.087533156498665,100.7228],
[24.27055702917771,99.180722],
[28.448275862068968,98.40963],
[32.82493368700264,98.024096],
[35.21220159151193,98.216867],
[38.39522546419097,98.987951],
[41.9761273209549,100.144578],
[44.36339522546419,100.72289],
[46.750663129973475,99.75903],
[48.93899204244032,98.602409],
[51.32625994694959,97.638554],
[54.70822281167108,97.638554],
[58.68700265251988,97.445783],
[60.87533156498674,97.445783],
[63.262599469496024,97.44578],
[65.84880636604774,97.445783],
[69.62864721485411,97.831325],
[72.61273209549071,97.253012],
[75.000000,97.44578313253012],
[77.18832891246683,97.445783],
[80.37135278514589,97.638554],
[83.75331564986737,98.602409],
[86.9363395225464,98.7951807],
[89.52254641909815,99.180722],
[93.10344827586206,99.180722],
[95.88859416445624,99.951807],
[98.87267904509284,101.49397],
[101.65782493368698,101.8795],
[104.84084880636604,102.6506],
[106.83023872679044,103.0361],
[109.41644562334216,103.0361],
[111.0079575596817,103.42168],
[113.59416445623341,102.4578],
[116.9761273209549,101.30120],
[120.15915119363393,100.1445],
[122.74535809018568,99.75903],
[124.53580901856762,98.21686],
[126.72413793103448,97.44578],
[127.9177718832891,95.710843],
[129.70822281167108,93.59036],
[131.2997347480106,92.433734],
[133.09018567639257,91.27710],
[135.07957559681697,90.12048],
[135.07957559681697,88.38554],
[134.48275862068965,85.87951],
[134.48275862068965,83.56626],
[133.68700265251988,81.06024],
[133.68700265251988,78.16867],
[135.67639257294428,76.43373],
[136.67108753315648,74.31325],
[138.06366047745357,72.38554],
[138.26259946949602,69.68674],
[139.05835543766577,67.37349],
[139.05835543766577,63.90361],
[137.86472148541114,60.81927],
[137.86472148541114,58.50602],
[138.26259946949602,56.00000],
[138.26259946949602,53.10843],
[137.26790450928382,49.83132],
[137.26790450928382,47.51807],
[137.06896551724137,45.59033],
[136.47214854111405,42.69879],
[136.07427055702917,41.34935],
[136.07427055702917,41.34939],
[135.67639257294428,39.03614]
])

# Considerando que os pontos de GPS são os pontos de referência
f = interp1d(np.linspace(0, 1, len(gps_path)), gps_path, axis=0, kind='linear')
car_path_interp = f(np.linspace(0, 1, len(car_path)))

# Calcular distâncias
distances = np.linalg.norm(car_path_interp - car_path, axis=1)

# Calcular métricas de erro
mae = np.mean(distances)
mse = np.mean(distances**2)
rmse = np.sqrt(mse)

print(f"MAE: {mae}")
print(f"MSE: {mse}")
print(f"RMSE: {rmse}")

# Plots
plt.figure(figsize=(12, 6))

plt.subplot(1, 2, 1)
plt.plot(gps_path[:, 0], gps_path[:, 1], label='Rota GPS', marker='o')
plt.plot(car_path[:, 0], car_path[:, 1], label='Caminho Carro', marker='x')
plt.legend()
plt.title('Comparação de Rotas')
plt.xlabel('Longitude')
plt.ylabel('Latitude')

plt.subplot(1, 2, 2)
plt.plot(distances, marker='o')
plt.title('Erro entre Pontos Correspondentes')
plt.xlabel('Índice do Ponto')
plt.ylabel('Distância')

plt.tight_layout()
plt.show()
